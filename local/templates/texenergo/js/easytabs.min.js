!function(e){e.easytabs=function(t,i){var a,n,s,o,r,l,c=this,d=e(t),h={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:d},u={fast:200,normal:400,slow:600};c.init=function(){c.settings=l=e.extend({},h,i),l.bind_str=l.event+".easytabs",l.uiTabs&&(l.tabActiveClass="ui-tabs-selected",l.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",l.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",l.tabClass="ui-state-default ui-corner-top",l.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),l.collapsible&&void 0!==i.defaultTab&&void 0===i.collpasedByDefault&&(l.collapsedByDefault=!1),"string"==typeof l.animationSpeed&&(l.animationSpeed=u[l.animationSpeed]),e("a.anchor").remove().prependTo("body"),d.data("easytabs",{}),c.setTransitions(),c.getTabs(),f(),m(),v(),x(),_(),d.attr("data-easytabs",!0)},c.setTransitions=function(){s=l.animate?{show:l.transitionIn,hide:l.transitionOut,speed:l.animationSpeed,collapse:l.transitionCollapse,uncollapse:l.transitionUncollapse,halfSpeed:l.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},c.getTabs=function(){var t;c.tabs=d.find(l.tabs),c.panels=e(),c.tabs.each(function(){var i=e(this),a=i.children("a"),n=i.children("a").data("target");i.data("easytabs",{}),void 0!==n&&null!==n?i.data("easytabs").ajax=a.attr("href"):n=a.attr("href"),n=n.match(/#([^\?]+)/)[1],t=l.panelContext.find("#"+n),t.length?(t.data("easytabs",{position:t.css("position"),visibility:t.css("visibility")}),t.not(l.panelActiveClass).hide(),c.panels=c.panels.add(t),i.data("easytabs").panel=t):(c.tabs=c.tabs.not(i),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+n+"' removed from set"))})},c.selectTab=function(e,t){var i=window.location,a=(i.hash.match(/^[^\?]*/)[0],e.parent().data("easytabs").panel),n=e.parent().data("easytabs").ajax;l.collapsible&&!r&&(e.hasClass(l.tabActiveClass)||e.hasClass(l.collapsedClass))?c.toggleTabCollapse(e,a,n,t):e.hasClass(l.tabActiveClass)&&a.hasClass(l.panelActiveClass)?l.cache||b(e,a,n,t):b(e,a,n,t)},c.toggleTabCollapse=function(e,t,i,a){c.panels.stop(!0,!0),p(d,"easytabs:before",[e,t,l])&&(c.tabs.filter("."+l.tabActiveClass).removeClass(l.tabActiveClass).children().removeClass(l.tabActiveClass),e.hasClass(l.collapsedClass)?(!i||l.cache&&e.parent().data("easytabs").cached||(d.trigger("easytabs:ajax:beforeSend",[e,t]),t.load(i,function(i,a,n){e.parent().data("easytabs").cached=!0,d.trigger("easytabs:ajax:complete",[e,t,i,a,n])})),e.parent().removeClass(l.collapsedClass).addClass(l.tabActiveClass).children().removeClass(l.collapsedClass).addClass(l.tabActiveClass),t.addClass(l.panelActiveClass)[s.uncollapse](s.speed,l.transitionUncollapseEasing,function(){d.trigger("easytabs:midTransition",[e,t,l]),"function"==typeof a&&a()})):(e.addClass(l.collapsedClass).parent().addClass(l.collapsedClass),t.removeClass(l.panelActiveClass)[s.collapse](s.speed,l.transitionCollapseEasing,function(){d.trigger("easytabs:midTransition",[e,t,l]),"function"==typeof a&&a()})))},c.matchTab=function(e){return c.tabs.find("[href='"+e+"'],[data-target='"+e+"']").first()},c.matchInPanel=function(e){return e&&c.validId(e)?c.panels.filter(":has("+e+")").first():[]},c.validId=function(e){return e.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)},c.selectTabFromHashChange=function(){var e,t=window.location.hash.match(/^[^\?]*/)[0],i=c.matchTab(t);l.updateHash&&(i.length?(r=!0,c.selectTab(i)):(e=c.matchInPanel(t),e.length?(t="#"+e.attr("id"),i=c.matchTab(t),r=!0,c.selectTab(i)):a.hasClass(l.tabActiveClass)||l.cycle||(""===t||c.matchTab(o).length||d.closest(t).length)&&(r=!0,c.selectTab(n))))},c.cycleTabs=function(t){l.cycle&&(t%=c.tabs.length,$tab=e(c.tabs[t]).children("a").first(),r=!0,c.selectTab($tab,function(){setTimeout(function(){c.cycleTabs(t+1)},l.cycle)}))},c.publicMethods={select:function(t){var i;0===(i=c.tabs.filter(t)).length?0===(i=c.tabs.find("a[href='"+t+"']")).length&&0===(i=c.tabs.find("a"+t)).length&&0===(i=c.tabs.find("[data-target='"+t+"']")).length&&0===(i=c.tabs.find("a[href$='"+t+"']")).length&&e.error("Tab '"+t+"' does not exist in tab set"):i=i.children("a").first(),c.selectTab(i)}};var p=function(t,i,a){var n=e.Event(i);return t.trigger(n,a),n.result!==!1},f=function(){d.addClass(l.containerClass),c.tabs.parent().addClass(l.tabsClass),c.tabs.addClass(l.tabClass),c.panels.addClass(l.panelClass)},m=function(){var t,i=window.location.hash.match(/^[^\?]*/)[0],s=c.matchTab(i).parent();1===s.length?(a=s,l.cycle=!1):(t=c.matchInPanel(i),t.length?(i="#"+t.attr("id"),a=c.matchTab(i).parent()):(a=c.tabs.parent().find(l.defaultTab),0===a.length&&e.error("The specified default tab ('"+l.defaultTab+"') could not be found in the tab set ('"+l.tabs+"') out of "+c.tabs.length+" tabs."))),n=a.children("a").first(),g(s)},g=function(t){var i,s;l.collapsible&&0===t.length&&l.collapsedByDefault?a.addClass(l.collapsedClass).children().addClass(l.collapsedClass):(i=e(a.data("easytabs").panel),s=a.data("easytabs").ajax,!s||l.cache&&a.data("easytabs").cached||(d.trigger("easytabs:ajax:beforeSend",[n,i]),i.load(s,function(e,t,s){a.data("easytabs").cached=!0,d.trigger("easytabs:ajax:complete",[n,i,e,t,s])})),a.data("easytabs").panel.show().addClass(l.panelActiveClass),a.addClass(l.tabActiveClass).children().addClass(l.tabActiveClass)),d.trigger("easytabs:initialised",[n,i])},v=function(){c.tabs.children("a").bind(l.bind_str,function(t){l.cycle=!1,r=!1,c.selectTab(e(this)),t.preventDefault?t.preventDefault():t.returnValue=!1})},b=function(e,t,i,a){if(c.panels.stop(!0,!0),p(d,"easytabs:before",[e,t,l])){var n,h,u,f,m=c.panels.filter(":visible"),g=t.parent(),v=window.location.hash.match(/^[^\?]*/)[0];l.animate&&(n=y(t),h=m.length?w(m):0,u=n-h),o=v,f=function(){d.trigger("easytabs:midTransition",[e,t,l]),l.animate&&"fadeIn"==l.transitionIn&&0>u&&g.animate({height:g.height()+u},s.halfSpeed).css({"min-height":""}),l.updateHash&&!r?window.location.hash="#"+t.attr("id"):r=!1,t[s.show](s.speed,l.transitionInEasing,function(){g.css({height:"","min-height":""}),d.trigger("easytabs:after",[e,t,l]),"function"==typeof a&&a()})},!i||l.cache&&e.parent().data("easytabs").cached||(d.trigger("easytabs:ajax:beforeSend",[e,t]),t.load(i,function(i,a,n){e.parent().data("easytabs").cached=!0,d.trigger("easytabs:ajax:complete",[e,t,i,a,n])})),l.animate&&"fadeOut"==l.transitionOut&&(u>0?g.animate({height:g.height()+u},s.halfSpeed):g.css({"min-height":g.height()})),c.tabs.filter("."+l.tabActiveClass).removeClass(l.tabActiveClass).children().removeClass(l.tabActiveClass),c.tabs.filter("."+l.collapsedClass).removeClass(l.collapsedClass).children().removeClass(l.collapsedClass),e.parent().addClass(l.tabActiveClass).children().addClass(l.tabActiveClass),c.panels.filter("."+l.panelActiveClass).removeClass(l.panelActiveClass),t.addClass(l.panelActiveClass),m.length?m[s.hide](s.speed,l.transitionOutEasing,f):t[s.uncollapse](s.speed,l.transitionUncollapseEasing,f)}},y=function(t){if(t.data("easytabs")&&t.data("easytabs").lastHeight)return t.data("easytabs").lastHeight;var i,a,n=t.css("display");try{i=e("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(s){i=e("<div></div>",{visibility:"hidden",overflow:"hidden"})}return a=t.wrap(i).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),t.unwrap(),t.css({position:t.data("easytabs").position,visibility:t.data("easytabs").visibility,display:n}),t.data("easytabs").lastHeight=a,a},w=function(e){var t=e.outerHeight();return e.data("easytabs")?e.data("easytabs").lastHeight=t:e.data("easytabs",{lastHeight:t}),t},x=function(){"function"==typeof e(window).hashchange?e(window).hashchange(function(){c.selectTabFromHashChange()}):e.address&&"function"==typeof e.address.change&&e.address.change(function(){c.selectTabFromHashChange()})},_=function(){var e;l.cycle&&(e=c.tabs.index(a),setTimeout(function(){c.cycleTabs(e+1)},l.cycle))};c.init()},e.fn.easytabs=function(t){var i=arguments;return this.each(function(){var a=e(this),n=a.data("easytabs");return void 0===n&&(n=new e.easytabs(this,t),a.data("easytabs",n)),n.publicMethods[t]?n.publicMethods[t](Array.prototype.slice.call(i,1)):void 0})}}(jQuery);
