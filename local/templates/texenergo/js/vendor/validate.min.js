!function(e,t,i){var n={messages:{required:"Поле обязательно к заполнению",matches:"Пароли не совпадают","default":"The %s field is still set to default, please change.",valid_email:"Проверьте корректность введенного email",valid_emails:"Проверьте корректность введенных email",min_length:"Поле %s должно содержать не меньше %s символов",min_lengthpass:"%s должен быть не менее %s символов длиной.",max_length:"Поле %s должно содержать не больше %s символов",exact_length:"Поле %s должно содержать %s символов",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",numeric:"The %s field must contain only numbers.",integer:"Поле %s должно содержать только цифры",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string.",valid_credit_card:"The %s field must contain a valid credit card number.",is_file_type:"В %s принимаются файлы форматов: %s",valid_url:"The %s field must contain a valid URL."},callback:function(){}},a=/^(.+?)\[(.+)\]$/,s=/^[0-9]+$/,o=/^\-?[0-9]+$/,r=/^\-?[0-9]*\.?[0-9]+$/,l=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=/^[a-z]+$/i,h=/^[a-z0-9]+$/i,d=/^[a-z0-9_\-]+$/i,u=/^[0-9]+$/i,p=/^[1-9][0-9]*$/i,f=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,m=/[^a-zA-Z0-9\/\+=]/i,g=/^[\d\-\s]+$/,v=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,y=function(e,t,i){this.callback=i||n.callback,this.errors=[],this.fields={},this.form=this._formByNameOrNode(e)||{},this.messages={},this.handlers={};for(var a=0,s=t.length;s>a;a++){var o=t[a];o.name&&o.id&&o.rules&&this._addField(o,o.id,o.name)}},w=function(e,t){var i;{if(!(e.length>0)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return $(e).attr(t);for(i=0;i<e.length;i++)if(e[i].checked)return e[i][t]}};y.prototype.setMessage=function(e,t){return this.messages[e]=t,this},y.prototype.registerCallback=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.handlers[e]=t),this},y.prototype._formByNameOrNode=function(e){return"object"==typeof e?e:t.forms[e]},y.prototype._addField=function(e,t,i){this.fields[t]={name:i,display:e.display||i,rules:e.rules,id:t,type:null,value:null,checked:null}},y.prototype._validateForm=function(e){if(this.errors=[],this.form.attributes)for(var n=0;n<this.form.attributes.length;n++)if("novalidate"==this.form.attributes[n].name&&"false"!=this.form.attributes[n].value)return!0;for(var a in this.fields)if(this.fields.hasOwnProperty(a)){var s=this.fields[a]||{},o=t.getElementById(s.id);o&&o!==i&&(s.type=o.length>0?o[0].type:o.type,s.value=w(o,"value"),s.checked=w(o,"checked"),this._validateField(s))}return"function"==typeof this.callback&&this.callback(this.errors,e),this.errors.length>0?(e&&e.preventDefault&&e.preventDefault(),!1):!0},y.prototype._validateField=function(e){for(var t=e.rules.split("|"),s=e.rules.indexOf("required"),o=!e.value||""===e.value||e.value===i,r=0,l=t.length;l>r;r++){var c=t[r],h=null,d=!1,u=a.exec(c);if((-1!==s||-1!==c.indexOf("!callback_")||!o)&&(u&&(c=u[1],h=u[2]),"!"===c.charAt(0)&&(c=c.substring(1,c.length)),"function"==typeof this._hooks[c]?this._hooks[c].apply(this,[e,h])||(d=!0):"callback_"===c.substring(0,9)&&(c=c.substring(9,c.length),"function"==typeof this.handlers[c]&&this.handlers[c].apply(this,[e.value,h])===!1&&(d=!0)),d)){var p=this.messages[c]||n.messages[c],f="An error has occurred with the "+e.display+" field.";p&&(f=p.replace("%s",e.display),h&&(f=f.replace("%s",this.fields[h]?this.fields[h].display:h))),this.errors.push({id:e.id,name:e.name,message:f,rule:c});break}}},y.prototype._hooks={required:function(e){var t=e.value;return"checkbox"===e.type||"radio"===e.type?e.checked===!0:null!==t&&""!==t},"default":function(e,t){return e.value!==t},matches:function(e,t){var i=this.form[t];return i?e.value===i.value:!1},valid_email:function(e){return l.test(e.value)},valid_emails:function(e){for(var t=e.value.split(","),i=0;i<t.length;i++)if(!l.test(t[i]))return!1;return!0},min_length:function(e,t){return s.test(t)?e.value.length>=parseInt(t,10):!1},min_lengthpass:function(e,t){return s.test(t)?e.value.length>=parseInt(t,10):!1},max_length:function(e,t){return s.test(t)?e.value.length<=parseInt(t,10):!1},exact_length:function(e,t){return s.test(t)?e.value.length===parseInt(t,10):!1},greater_than:function(e,t){return r.test(e.value)?parseFloat(e.value)>parseFloat(t):!1},less_than:function(e,t){return r.test(e.value)?parseFloat(e.value)<parseFloat(t):!1},alpha:function(e){return c.test(e.value)},alpha_numeric:function(e){return h.test(e.value)},alpha_dash:function(e){return d.test(e.value)},numeric:function(e){return s.test(e.value)},integer:function(e){return o.test(e.value)},decimal:function(e){return r.test(e.value)},is_natural:function(e){return u.test(e.value)},is_natural_no_zero:function(e){return p.test(e.value)},valid_ip:function(e){return f.test(e.value)},valid_base64:function(e){return m.test(e.value)},valid_url:function(e){return v.test(e.value)},valid_credit_card:function(e){if(!g.test(e.value))return!1;for(var t=0,i=0,n=!1,a=e.value.replace(/\D/g,""),s=a.length-1;s>=0;s--){var o=a.charAt(s);i=parseInt(o,10),n&&(i*=2)>9&&(i-=9),t+=i,n=!n}return t%10===0},is_file_type:function(e,t){if("file"!==e.type)return!0;var i=e.value.substr(e.value.lastIndexOf(".")+1),n=t.split(","),a=!1,s=0,o=n.length;for(s;o>s;s++)i==n[s]&&(a=!0);return a}},e.FormValidator=y}(window,document);
