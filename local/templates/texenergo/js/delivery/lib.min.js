function getChar(e){return null==e.which?e.keyCode<32?null:String.fromCharCode(e.keyCode):0!=e.which&&0!=e.charCode?e.which<32?null:String.fromCharCode(e.which):null}function setcookie(e,t,n,i,o,s){n instanceof Date?n=n.toGMTString():"number"==typeof n&&(n=new Date(+new Date+1e3*n).toGMTString());var a,r,l=[e+"="+escape(t)];for(r in a={expires:n,path:i,domain:o})a[r]&&l.push(r+"="+a[r]);return s&&l.push("secure"),document.cookie=l.join(";"),!0}function getcookie(e){var t=" "+document.cookie,n=" "+e+"=",i=null,o=0,s=0;return t.length>0&&(o=t.indexOf(n),-1!=o&&(o+=n.length,s=t.indexOf(";",o),-1==s&&(s=t.length),i=unescape(t.substring(o,s)))),i}$(function(){$(document).on("keypress","[data-digits-only]",function(e){var t=getChar(e);return null===t?!0:!/\d|,/.test(t)||$(this).val().indexOf(",")>=0&&","==t?!1:void 0}),$("[data-phone-mask]").mask("8(999)999-99-99"),$("[data-fancybox]").fancybox({helpers:{overlay:{locked:!1}}}),$(document).on("click change","[data-submit-target]",function(e){var t=$(this);(1!=t.data("not-click")||"click"!=e.type)&&setTimeout(function(){$("."+t.data("submit-target")).trigger("submit")},50)}),$(document).on("submit","[data-ajax-form]",function(e){e.preventDefault();var t=$(this),n=void 0===window.FormData?t.serialize():new FormData(t[0]),i=$("[data-fields]",t),o=$("[data-form-message]",t);return t.trigger("forms.submit.before",[n]),$.ajax({url:t.attr("action"),type:t.attr("method"),data:n,processData:!1,contentType:!1,dataType:"json",success:function(e){if(e.success){if(1==t.data("slide-enable")&&i.slideUp(),$(".input-text").val(""),t.trigger("forms.submit.success",[e]),t.data("target")){var n=t.parents('.modal[role="dialog"]');n.length&&n.modal("hide"),$(t.data("target")).modal("show")}}else t.trigger("forms.submit.error",[e]);if(e.message&&o){var s=$("[data-place-text]",o),a=$("[data-text-holder]",o);a&&(e.success?a.addClass("success-msg").removeClass("text-error"):a.addClass("text-error").removeClass("success-msg")),s?s.html(e.message):o.html(e.message),1==t.data("slide-enable")&&o.slideDown()}},error:function(e,n,i){t.trigger("forms.submit.error",[e,n,i])},complete:function(e,n){t.trigger("forms.submit.complete",[e,n])}}),!1})});
