$(function(){$("#subscribe-form").submit(function(){var e=$("#subscribe-result-msg");e.text(""),e.removeClass("ok").removeClass("fail");var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return email=$(".subscribe-email",$(this)).val(),0!=email.length&&t.test(email)?($(".subscribe-email",$(this)).removeClass("field-error"),$.post("/local/templates/texenergo/components/bitrix/subscribe.form/footer/ajax.php",$(this).serializeArray(),function(t){try{objRes=$.parseJSON(t),"ok"==objRes.status?(e.addClass("ok").text(objRes.msg),$("#subscribe-form .subscribe-email").val("")):e.addClass("fail").html("Ошибка: "+objRes.msg)}catch(i){e.addClass("fail").text("При оформлении подписки произошла ошибка")}})):$(".subscribe-email",$(this)).addClass("field-error"),!1})});
